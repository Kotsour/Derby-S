<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Kocour a Krysa - jednoduchá hra</title>
<style>
  body {
    background: #0b3d0b;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    user-select: none;
  }
  #game {
    background: #178117;
    display: block;
    margin: 20px auto;
    border-radius: 10px;
  }
  #startmsg, #score {
    font-size: 24px;
    margin-top: 20px;
  }
</style>
</head>
<body>

<div id="startmsg">Stiskni ENTER pro start hry</div>
<canvas id="game" width="600" height="400"></canvas>
<div id="score">Skóre: 0</div>

<script>
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const startMsg = document.getElementById('startmsg');
  const scoreDiv = document.getElementById('score');

  const cols = 30;
  const rows = 20;
  const cellSize = 20;

  let running = false;
  let score = 0;

  let kocour = { x: 10, y: 10, dx: 0, dy: 0 };
  let krysa = { x: 15, y: 10 };

  function drawCell(x, y, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x * cellSize, y * cellSize, cellSize - 1, cellSize - 1);
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Krysa - červená
    drawCell(krysa.x, krysa.y, 'red');

    // Kocour - bílý s červeným středem
    drawCell(kocour.x, kocour.y, 'white');
    ctx.fillStyle = 'red';
    ctx.fillRect(kocour.x * cellSize + 5, kocour.y * cellSize + 5, cellSize - 10, cellSize - 10);
  }

  function moveKrysa() {
    krysa.x = Math.floor(Math.random() * cols);
    krysa.y = Math.floor(Math.random() * rows);
  }

  function update() {
    if (!running) return;

    kocour.x += kocour.dx;
    kocour.y += kocour.dy;

    // Kontrola okrajů
    if (kocour.x < 0 || kocour.x >= cols || kocour.y < 0 || kocour.y >= rows) {
      alert('Konec hry! Tvoje skóre: ' + score);
      running = false;
      startMsg.style.display = 'block';
      score = 0;
      scoreDiv.textContent = 'Skóre: 0';
      kocour = { x: 10, y: 10, dx: 0, dy: 0 };
      moveKrysa();
      draw();
      return;
    }

    // Když kocour chytí krysu
    if (kocour.x === krysa.x && kocour.y === krysa.y) {
      score++;
      scoreDiv.textContent = 'Skóre: ' + score;
      moveKrysa();
    }
  }

  function gameLoop() {
    if (running) {
      update();
      draw();
    }
    setTimeout(gameLoop, 100); // 10 FPS - hýbe se plynule
  }

  document.addEventListener('keydown', e => {
    if (!running && e.key === 'Enter') {
      running = true;
      startMsg.style.display = 'none';
      return;
    }
    if (!running) return;

    if (e.key === 'ArrowLeft' && kocour.dx !== 1) {
      kocour.dx = -1;
      kocour.dy = 0;
    } else if (e.key === 'ArrowRight' && kocour.dx !== -1) {
      kocour.dx = 1;
      kocour.dy = 0;
    } else if (e.key === 'ArrowUp' && kocour.dy !== 1) {
      kocour.dx = 0;
      kocour.dy = -1;
    } else if (e.key === 'ArrowDown' && kocour.dy !== -1) {
      kocour.dx = 0;
      kocour.dy = 1;
    }
  });

  // Start
  moveKrysa();
  draw();
  gameLoop();
</script>

</body>
</html>
