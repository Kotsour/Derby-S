<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jednoduchá hra - Kocour a krysa</title>
<style>
  body {
    margin: 0; padding: 0; background: #0b3d0b; display: flex; justify-content: center; align-items: center; height: 100vh;
    font-family: Arial, sans-serif; color: white; user-select: none;
  }
  canvas {
    background: #178117;
    border-radius: 12px;
    box-shadow: 0 0 10px #044004;
  }
  #startmsg {
    position: absolute; top: 20px; font-size: 20px; font-weight: bold;
    background: rgba(0,0,0,0.5); padding: 8px 12px; border-radius: 8px;
    user-select:none;
  }
  #scoreboard {
    position: absolute; top: 60px; font-size: 18px;
    background: rgba(0,0,0,0.4); padding: 6px 10px; border-radius: 8px;
  }
</style>
</head>
<body>
<div id="startmsg">Stiskni ENTER pro start hry</div>
<div id="scoreboard">Skóre: 0</div>
<canvas id="game" width="600" height="400"></canvas>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const startMsg = document.getElementById('startmsg');
  const scoreBoard = document.getElementById('scoreboard');

  const cols = 30;
  const rows = 20;
  const cellSize = 20;

  let running = false;
  let score = 0;

  let kocour = { x: 10, y: 10, dx: 0, dy: 0 };
  let krysa = { x: 15, y: 10 };

  function drawCell(x, y, color) {
    ctx.fillStyle = color;
    ctx.fillRect(x * cellSize, y * cellSize, cellSize - 1, cellSize - 1);
  }

  function draw() {
    // pozadí
    ctx.fillStyle = '#0b3d0b';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // nakreslíme krysu (červená)
    drawCell(krysa.x, krysa.y, 'red');

    // nakreslíme kocoura (bílo-červený čtverec)
    drawCell(kocour.x, kocour.y, 'white');
    ctx.fillStyle = 'red';
    ctx.fillRect(kocour.x * cellSize + 5, kocour.y * cellSize + 5, cellSize - 10, cellSize - 10);
  }

  function update() {
    if (!running) return;

    kocour.x += kocour.dx;
    kocour.y += kocour.dy;

    // ohraničení - hra končí při nárazu do zdi
    if (kocour.x < 0 || kocour.x >= cols || kocour.y < 0 || kocour.y >= rows) {
      resetGame();
      return;
    }

    // když kocour chytí krysu
    if (kocour.x === krysa.x && kocour.y === krysa.y) {
      score++;
      scoreBoard.textContent = 'Skóre: ' + score;
      moveKrysa();
    }
  }

  function moveKrysa() {
    krysa.x = Math.floor(Math.random() * cols);
    krysa.y = Math.floor(Math.random() * rows);
  }

  function resetGame() {
    alert('Konec hry! Tvoje skóre: ' + score);
    running = false;
    score = 0;
    scoreBoard.textContent = 'Skóre: 0';
    kocour = { x: 10, y: 10, dx: 0, dy: 0 };
    moveKrysa();
    startMsg.style.display = 'block';
  }

  function gameLoop() {
    if(running){
      update();
      draw();
    }
    requestAnimationFrame(gameLoop);
  }

  document.addEventListener('keydown', e => {
    if (!running && e.key === 'Enter') {
      running = true;
      startMsg.style.display = 'none';
      return;
    }
    if (!running) return;

    switch(e.key) {
      case 'ArrowLeft':
        if(kocour.dx !== 1){
          kocour.dx = -1;
          kocour.dy = 0;
        }
        break;
      case 'ArrowRight':
        if(kocour.dx !== -1){
          kocour.dx = 1;
          kocour.dy = 0;
        }
        break;
      case 'ArrowUp':
        if(kocour.dy !== 1){
          kocour.dx = 0;
          kocour.dy = -1;
        }
        break;
      case 'ArrowDown':
        if(kocour.dy !== -1){
          kocour.dx = 0;
          kocour.dy = 1;
        }
        break;
    }
  });

  moveKrysa();
  draw();
  gameLoop();
})();
</script>
</body>
</html>
